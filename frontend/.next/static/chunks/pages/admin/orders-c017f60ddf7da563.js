(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{2479:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return r(7789)}])},6490:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(5893);r(7294);var o=r(1664),i=r.n(o),l=r(1163);function a(e){let{children:t}=e,r=(0,l.useRouter)();return(0,n.jsxs)("div",{style:s.wrapper,children:[(0,n.jsxs)("aside",{style:s.sidebar,children:[(0,n.jsx)("div",{style:s.sidebarHeader,children:(0,n.jsx)("h2",{style:s.sidebarTitle,children:"Admin Panel"})}),(0,n.jsx)("nav",{style:s.nav,children:[{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/admin/products",label:"Products",icon:"\uD83E\uDD69"},{href:"/admin/orders",label:"Orders",icon:"\uD83D\uDCE6"},{href:"/admin/design",label:"Design",icon:"\uD83C\uDFA8"},{href:"/admin/settings",label:"Settings",icon:"⚙️"}].map(e=>(0,n.jsxs)(i(),{href:e.href,style:{...s.navItem,...r.pathname===e.href?s.navItemActive:{}},children:[(0,n.jsx)("span",{style:s.icon,children:e.icon}),e.label]},e.href))}),(0,n.jsx)("div",{style:s.sidebarFooter,children:(0,n.jsx)(i(),{href:"/",style:s.backLink,children:"← Back to Store"})})]}),(0,n.jsx)("main",{style:s.main,children:(0,n.jsx)("div",{style:s.content,children:t})})]})}let s={wrapper:{display:"flex",minHeight:"100vh",backgroundColor:"#f5f5f5"},sidebar:{width:"250px",backgroundColor:"var(--color-primary)",color:"white",display:"flex",flexDirection:"column"},sidebarHeader:{padding:"2rem 1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},sidebarTitle:{fontSize:"20px",fontWeight:"bold",margin:0},nav:{flex:1,padding:"1rem 0"},navItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1.5rem",color:"white",textDecoration:"none",transition:"background-color 0.2s ease"},navItemActive:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderLeft:"4px solid white"},icon:{fontSize:"20px"},sidebarFooter:{padding:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},backLink:{color:"white",textDecoration:"none",fontSize:"14px"},main:{flex:1,overflow:"auto"},content:{padding:"2rem",maxWidth:"1400px"}}},8937:function(e,t,r){"use strict";r.d(t,{Yc:function(){return a},fi:function(){return l},kn:function(){return s},pJ:function(){return d}});var n=r(7066);let o=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",i=n.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}}),l={getAll:e=>i.get("/products",{params:e}),getOne:e=>i.get("/products/".concat(e)),create:e=>i.post("/products",e),update:(e,t)=>i.put("/products/".concat(e),t),delete:e=>i.delete("/products/".concat(e)),bulkUpdate:e=>i.post("/products/bulk-update",e)},a={getAll:()=>i.get("/categories"),getOne:e=>i.get("/categories/".concat(e)),create:e=>i.post("/categories",e),update:(e,t)=>i.put("/categories/".concat(e),t),delete:e=>i.delete("/categories/".concat(e))},s={getAll:e=>i.get("/orders",{params:e}),getOne:e=>i.get("/orders/".concat(e)),create:e=>i.post("/orders",e),updateStatus:(e,t)=>i.put("/orders/".concat(e,"/status"),{status:t})},d={getAll:()=>i.get("/settings"),getOne:e=>i.get("/settings/".concat(e)),update:(e,t)=>i.put("/settings/".concat(e),{value:t})}},7789:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(5893),o=r(7294),i=r(6490),l=r(8937);function a(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[d,c]=(0,o.useState)("all");(0,o.useEffect)(()=>{u()},[d]);let u=async()=>{a(!0);try{let e={};"all"!==d&&(e.status=d);let r=await l.kn.getAll(e);t(r.data.data||[])}catch(e){console.error("Error fetching orders:",e)}finally{a(!1)}},h=async(e,t)=>{try{await l.kn.updateStatus(e,t),alert("Order status updated successfully"),u()}catch(e){console.error("Error updating order status:",e),alert("Error updating order status")}},p=e=>new Intl.NumberFormat("en-RW",{style:"currency",currency:"RWF",minimumFractionDigits:0}).format(e),x=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=["pending","confirmed","preparing","ready","delivered","cancelled"];return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)("h1",{style:s.title,children:"Orders Management"}),(0,n.jsxs)("div",{style:s.filters,children:[(0,n.jsx)("button",{className:"all"===d?"btn btn-primary":"btn",style:"all"===d?s.activeFilter:s.filterButton,onClick:()=>c("all"),children:"All Orders"}),g.map(e=>(0,n.jsx)("button",{className:d===e?"btn btn-primary":"btn",style:d===e?s.activeFilter:s.filterButton,onClick:()=>c(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,n.jsx)("div",{className:"card",style:s.tableContainer,children:r?(0,n.jsx)("p",{children:"Loading orders..."}):0===e.length?(0,n.jsx)("p",{children:"No orders found"}):(0,n.jsxs)("table",{style:s.table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:s.th,children:"Order ID"}),(0,n.jsx)("th",{style:s.th,children:"Customer"}),(0,n.jsx)("th",{style:s.th,children:"Items"}),(0,n.jsx)("th",{style:s.th,children:"Total"}),(0,n.jsx)("th",{style:s.th,children:"Status"}),(0,n.jsx)("th",{style:s.th,children:"Date"}),(0,n.jsx)("th",{style:s.th,children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{var t,r;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:s.td,children:e.id.substring(0,8)}),(0,n.jsxs)("td",{style:s.td,children:[(0,n.jsx)("div",{children:(null===(t=e.delivery)||void 0===t?void 0:t.customerName)||"N/A"}),(0,n.jsx)("div",{style:s.subText,children:e.phone})]}),(0,n.jsxs)("td",{style:s.td,children:[(null===(r=e.items)||void 0===r?void 0:r.length)||0," items"]}),(0,n.jsx)("td",{style:s.td,children:p(e.totalAmount)}),(0,n.jsx)("td",{style:s.td,children:(0,n.jsx)("select",{value:e.status,onChange:t=>h(e.id,t.target.value),style:s.statusSelect,children:g.map(e=>(0,n.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,n.jsx)("td",{style:s.td,children:x(e.createdAt)}),(0,n.jsxs)("td",{style:s.td,children:[(0,n.jsx)("button",{style:s.actionButton,onClick:()=>alert("Order details coming soon"),children:"View"}),(0,n.jsx)("button",{style:s.actionButton,onClick:()=>{let t="Order #".concat(e.id.substring(0,8)," status updated to: ").concat(e.status),r="https://wa.me/".concat(e.phone,"?text=").concat(encodeURIComponent(t));window.open(r,"_blank")},children:"\uD83D\uDCF1 WhatsApp"})]})]},e.id)})})]})})]})}let s={title:{fontSize:"32px",fontWeight:"bold",marginBottom:"2rem",color:"var(--color-text)"},filters:{display:"flex",gap:"0.5rem",marginBottom:"2rem",flexWrap:"wrap"},filterButton:{backgroundColor:"white",color:"var(--color-text)",border:"1px solid var(--color-border)"},activeFilter:{backgroundColor:"var(--color-primary)",color:"white"},tableContainer:{padding:"0",overflow:"auto"},table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",padding:"12px",borderBottom:"2px solid var(--color-border)",fontSize:"14px",fontWeight:"600",color:"var(--color-text)",backgroundColor:"#f9f9f9"},td:{padding:"12px",borderBottom:"1px solid var(--color-border)",fontSize:"14px"},subText:{fontSize:"12px",color:"var(--color-text-light)"},statusSelect:{padding:"6px 12px",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)",fontSize:"14px",cursor:"pointer"},actionButton:{background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline",marginRight:"0.5rem"}}},1163:function(e,t,r){e.exports=r(3079)}},function(e){e.O(0,[664,66,888,774,179],function(){return e(e.s=2479)}),_N_E=e.O()}]);