(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{1204:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return r(9833)}])},6490:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(5893);r(7294);var i=r(1664),l=r.n(i),o=r(1163);function s(e){let{children:t}=e,r=(0,o.useRouter)();return(0,n.jsxs)("div",{style:d.wrapper,children:[(0,n.jsxs)("aside",{style:d.sidebar,children:[(0,n.jsx)("div",{style:d.sidebarHeader,children:(0,n.jsx)("h2",{style:d.sidebarTitle,children:"Admin Panel"})}),(0,n.jsx)("nav",{style:d.nav,children:[{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/admin/products",label:"Products",icon:"\uD83E\uDD69"},{href:"/admin/orders",label:"Orders",icon:"\uD83D\uDCE6"},{href:"/admin/design",label:"Design",icon:"\uD83C\uDFA8"},{href:"/admin/settings",label:"Settings",icon:"⚙️"}].map(e=>(0,n.jsxs)(l(),{href:e.href,style:{...d.navItem,...r.pathname===e.href?d.navItemActive:{}},children:[(0,n.jsx)("span",{style:d.icon,children:e.icon}),e.label]},e.href))}),(0,n.jsx)("div",{style:d.sidebarFooter,children:(0,n.jsx)(l(),{href:"/",style:d.backLink,children:"← Back to Store"})})]}),(0,n.jsx)("main",{style:d.main,children:(0,n.jsx)("div",{style:d.content,children:t})})]})}let d={wrapper:{display:"flex",minHeight:"100vh",backgroundColor:"#f5f5f5"},sidebar:{width:"250px",backgroundColor:"var(--color-primary)",color:"white",display:"flex",flexDirection:"column"},sidebarHeader:{padding:"2rem 1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},sidebarTitle:{fontSize:"20px",fontWeight:"bold",margin:0},nav:{flex:1,padding:"1rem 0"},navItem:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1.5rem",color:"white",textDecoration:"none",transition:"background-color 0.2s ease"},navItemActive:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderLeft:"4px solid white"},icon:{fontSize:"20px"},sidebarFooter:{padding:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},backLink:{color:"white",textDecoration:"none",fontSize:"14px"},main:{flex:1,overflow:"auto"},content:{padding:"2rem",maxWidth:"1400px"}}},8937:function(e,t,r){"use strict";r.d(t,{Yc:function(){return s},fi:function(){return o},kn:function(){return d},pJ:function(){return a}});var n=r(7066);let i=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",l=n.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}}),o={getAll:e=>l.get("/products",{params:e}),getOne:e=>l.get("/products/".concat(e)),create:e=>l.post("/products",e),update:(e,t)=>l.put("/products/".concat(e),t),delete:e=>l.delete("/products/".concat(e)),bulkUpdate:e=>l.post("/products/bulk-update",e)},s={getAll:()=>l.get("/categories"),getOne:e=>l.get("/categories/".concat(e)),create:e=>l.post("/categories",e),update:(e,t)=>l.put("/categories/".concat(e),t),delete:e=>l.delete("/categories/".concat(e))},d={getAll:e=>l.get("/orders",{params:e}),getOne:e=>l.get("/orders/".concat(e)),create:e=>l.post("/orders",e),updateStatus:(e,t)=>l.put("/orders/".concat(e,"/status"),{status:t})},a={getAll:()=>l.get("/settings"),getOne:e=>l.get("/settings/".concat(e)),update:(e,t)=>l.put("/settings/".concat(e),{value:t})}},9833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(5893),i=r(7294),l=r(6490),o=r(8937);function s(){let[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[a,c]=(0,i.useState)(!0),[u,p]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{x()},[]);let x=async()=>{c(!0);try{let[e,r]=await Promise.all([o.fi.getAll({limit:100}),o.Yc.getAll()]);t(e.data.data||[]),s(r.data||[])}catch(e){console.error("Error fetching data:",e)}finally{c(!1)}},m=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await o.fi.delete(e),alert("Product deleted successfully"),x()}catch(e){console.error("Error deleting product:",e),alert("Error deleting product")}},b=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},f=async e=>{if(0===u.length){alert("Please select products to update");return}try{await o.fi.bulkUpdate({productIds:u,updates:e}),alert("".concat(u.length," products updated successfully")),p([]),g(!1),x()}catch(e){console.error("Error updating products:",e),alert("Error updating products")}},y=e=>new Intl.NumberFormat("en-RW",{style:"currency",currency:"RWF",minimumFractionDigits:0}).format(e);return(0,n.jsxs)(l.Z,{children:[(0,n.jsxs)("div",{style:d.header,children:[(0,n.jsx)("h1",{style:d.title,children:"Products Management"}),(0,n.jsx)("button",{className:"btn btn-primary",children:"Add New Product"})]}),u.length>0&&(0,n.jsxs)("div",{className:"card",style:d.bulkActions,children:[(0,n.jsxs)("span",{children:[u.length," products selected"]}),(0,n.jsxs)("div",{style:d.bulkButtons,children:[(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>g(!h),children:"Bulk Edit"}),(0,n.jsx)("button",{className:"btn",onClick:()=>p([]),children:"Clear Selection"})]})]}),h&&(0,n.jsxs)("div",{className:"card",style:d.bulkEditForm,children:[(0,n.jsx)("h3",{children:"Bulk Edit Products"}),(0,n.jsxs)("div",{style:d.formRow,children:[(0,n.jsxs)("label",{children:["Set Price:",(0,n.jsx)("input",{type:"number",style:d.input,placeholder:"New price",id:"bulkPrice"})]}),(0,n.jsxs)("label",{children:["Set Active Status:",(0,n.jsxs)("select",{style:d.input,id:"bulkActive",children:[(0,n.jsx)("option",{value:"",children:"No change"}),(0,n.jsx)("option",{value:"true",children:"Active"}),(0,n.jsx)("option",{value:"false",children:"Inactive"})]})]})]}),(0,n.jsx)("button",{className:"btn btn-primary",onClick:()=>{let e=document.getElementById("bulkPrice").value,t=document.getElementById("bulkActive").value,r={};e&&(r.pricePerBaseUnit=parseFloat(e)),t&&(r.isActive="true"===t),f(r)},children:"Apply Changes"})]}),(0,n.jsx)("div",{className:"card",style:d.tableContainer,children:a?(0,n.jsx)("p",{children:"Loading products..."}):(0,n.jsxs)("table",{style:d.table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:d.th,children:(0,n.jsx)("input",{type:"checkbox",checked:u.length===e.length,onChange:t=>{t.target.checked?p(e.map(e=>e.id)):p([])}})}),(0,n.jsx)("th",{style:d.th,children:"Image"}),(0,n.jsx)("th",{style:d.th,children:"Title"}),(0,n.jsx)("th",{style:d.th,children:"SKU"}),(0,n.jsx)("th",{style:d.th,children:"Price"}),(0,n.jsx)("th",{style:d.th,children:"Unit"}),(0,n.jsx)("th",{style:d.th,children:"Status"}),(0,n.jsx)("th",{style:d.th,children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{var t,r;let i=(null===(r=e.images)||void 0===r?void 0:null===(t=r.find(e=>e.isPrimary))||void 0===t?void 0:t.imageUrl)||"/placeholder.jpg";return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:d.td,children:(0,n.jsx)("input",{type:"checkbox",checked:u.includes(e.id),onChange:()=>b(e.id)})}),(0,n.jsx)("td",{style:d.td,children:(0,n.jsx)("img",{src:i,alt:e.title,style:d.productImage,onError:e=>{e.target.src="/placeholder.jpg"}})}),(0,n.jsx)("td",{style:d.td,children:e.title}),(0,n.jsx)("td",{style:d.td,children:e.sku||"N/A"}),(0,n.jsx)("td",{style:d.td,children:y(e.pricePerBaseUnit)}),(0,n.jsx)("td",{style:d.td,children:e.baseUnit}),(0,n.jsx)("td",{style:d.td,children:(0,n.jsx)("span",{style:{...d.statusBadge,backgroundColor:e.isActive?"#4CAF50":"#999"},children:e.isActive?"Active":"Inactive"})}),(0,n.jsxs)("td",{style:d.td,children:[(0,n.jsx)("button",{style:d.actionButton,onClick:()=>alert("Edit feature coming soon"),children:"Edit"}),(0,n.jsx)("button",{style:{...d.actionButton,color:"#d32f2f"},onClick:()=>m(e.id),children:"Delete"})]})]},e.id)})})]})})]})}let d={header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},title:{fontSize:"32px",fontWeight:"bold",color:"var(--color-text)"},bulkActions:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",marginBottom:"1rem",backgroundColor:"#FFF3CD",border:"1px solid #FFE69C"},bulkButtons:{display:"flex",gap:"0.5rem"},bulkEditForm:{padding:"1.5rem",marginBottom:"1rem"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",margin:"1rem 0"},input:{display:"block",width:"100%",padding:"8px",marginTop:"0.25rem",border:"1px solid var(--color-border)",borderRadius:"var(--border-radius)"},tableContainer:{padding:"0",overflow:"auto"},table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",padding:"12px",borderBottom:"2px solid var(--color-border)",fontSize:"14px",fontWeight:"600",color:"var(--color-text)",backgroundColor:"#f9f9f9"},td:{padding:"12px",borderBottom:"1px solid var(--color-border)",fontSize:"14px"},productImage:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"},statusBadge:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",color:"white",fontSize:"12px",fontWeight:"600"},actionButton:{background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline",marginRight:"0.5rem"}}},1163:function(e,t,r){e.exports=r(3079)}},function(e){e.O(0,[664,66,888,774,179],function(){return e(e.s=1204)}),_N_E=e.O()}]);